#Required sudo for docker
sudo: required
language: bash

env:
  - container_id=${container_id:-$timestamp}
 
services:
  - docker

before_install:
#pull the image from Docker Hub for the OS under test
  - docker pull sath89/oracle-12c

script:
#create a random file to store the container
  - export container_id=$(date +%s)
  - export cleanup=false

# Run container detached
  - docker run -d -p 8080:8080 -p 1521:1521 sath89/oracle-12c
  - docker logs -f ${container_id}
  - docker exec -it --name ${container_id} sath89/oracle-12c /bin/bash -c "netstat -nlpt"
  - docker exec -it --name ${container_id} sath89/oracle-12c /bin/bash -c "netstat -nlpt;su oracle;cd $ORACLE_HOME;login.sh"
  - docker stop $(docker ps -aq)
  - docker rm $(docker ps -aq)
  - docker rmi $(docker images -aq)
  #- docker run -it --name ${container_id} centos:7 /bin/bash -c "yum -y install epel-release;yum -y install git;git clone https://github.com/hemanth22/CSVToCustomDSV.git;cd CSVToCustomDSV;./csv2dsv.sh"

notifications:
 slack:
   rooms:
     - nothingorganization:GN1JzklSpbMyfZVWcS05U6a0#mygitrepos
